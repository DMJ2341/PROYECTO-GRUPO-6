{
  "id": "c2_l1",
  "title": "Fundamentos de Redes",
  "description": "Caso Real: Mirai Botnet (2016)",
  "type": "interactive",
  "duration_minutes": 25,
  "xp_reward": 60,
  "order_index": 1,
  "course_id": 2,
  "total_screens": 20,
  "theme": {
    "primary_color": "#FF5722",
    "secondary_color": "#2196F3",
    "accent_color": "#FFC107",
    "gradient": ["#0f2027", "#203a43", "#2c5364"]
  },
  "screens": [
    {
      "screen_id": 1,
      "type": "story_intro",
      "title": "Operaci√≥n: Mirai Apocalypse",
      "content": {
        "headline": "21 OCTUBRE 2016",
        "subheadline": "600K dispositivos IoT tumban internet en Estados Unidos",
        "background_image": "ddos_attack_dark",
        "stats": [
          {"value": "600K", "label": "Dispositivos infectados"},
          {"value": "1.2 Tbps", "label": "Tr√°fico DDoS"},
          {"value": "11hrs", "label": "Internet down"}
        ],
        "cta_text": "Investigar el Ataque"
      }
    },
    {
      "screen_id": 2,
      "type": "story_slide",
      "title": "El Enemigo: IoT Inseguro",
      "content": {
        "icon": "router",
        "icon_color": "#FF5722",
        "headline": "Internet of Threats",
        "body": "C√°maras IP, DVRs, routers dom√©sticos. Millones de dispositivos shippean con Telnet enabled y credenciales por defecto. admin/admin, root/12345, usuario/usuario.",
        "highlight_box": {
          "type": "warning",
          "text": "IoT security es ox√≠moron. Dispositivos baratos, sin updates, credentials hardcoded. Fabricantes priorizan time-to-market sobre seguridad."
        },
        "mood": "warning"
      }
    },
    {
      "screen_id": 3,
      "type": "crisis_timeline",
      "title": "‚è±Ô∏è CRONOLOG√çA DEL ATAQUE",
      "content": {
        "start_time": "Septiembre 2016",
        "events": [
          {
            "time": "Sep 2016",
            "icon": "search",
            "title": "Scanning Masivo",
            "description": "Mirai escanea internet buscando puerto 23 (Telnet) abierto. Prueba 60+ combinaciones de credenciales default.",
            "severity": "high",
            "visual": "scanning"
          },
          {
            "time": "Sep-Oct",
            "icon": "bug_report",
            "title": "Infecci√≥n Exponencial",
            "description": "600,000 dispositivos infectados en semanas. Cada bot infecta m√°s bots. Crecimiento exponencial.",
            "severity": "critical",
            "visual": "infection_spread"
          },
          {
            "time": "20 Sep",
            "icon": "shield",
            "title": "Primer Target: KrebsOnSecurity",
            "description": "665 Gbps contra el blog de Brian Krebs. Akamai tuvo que drop el cliente por el costo.",
            "severity": "high",
            "visual": "ddos_target"
          },
          {
            "time": "21 Oct 8AM",
            "icon": "dns",
            "title": "Target: Dyn DNS",
            "description": "1.2 Tbps de UDP flood contra Dyn, major DNS provider. M√∫ltiples waves de ataque.",
            "severity": "critical",
            "visual": "dns_attack"
          },
          {
            "time": "21 Oct 9AM-8PM",
            "icon": "public_off",
            "title": "Internet Collapsa",
            "description": "Twitter, Netflix, GitHub, Reddit, NYTimes inaccesibles. East Coast EE.UU. sin servicios cr√≠ticos.",
            "severity": "critical",
            "visual": "internet_down"
          },
          {
            "time": "30 Sep",
            "icon": "code",
            "title": "Source Code Released",
            "description": "Creator libera c√≥digo de Mirai en HackForums. 100+ variantes spawneadas instant√°neamente.",
            "severity": "critical",
            "visual": "code_leak"
          }
        ],
        "user_prompt": "Desliza para ver c√≥mo IoT destruy√≥ internet"
      }
    },
    {
      "screen_id": 4,
      "type": "crisis_decision",
      "title": "üö® DECISI√ìN: IoT Security",
      "content": {
        "scenario": "Eres el fabricante de c√°maras IP. Tu ingeniero propone: 'Agreguemos SSH con keys en vez de Telnet, pero eso agrega $2 de costo y 2 semanas de desarrollo'. Tu CFO dice 'necesitamos ship AHORA para Q4'. ¬øQu√© decides?",
        "timer_seconds": 30,
        "alert_type": "warning",
        "options": [
          {
            "id": "secure",
            "text": "Implementar SSH correctamente - retrasar 2 semanas",
            "icon": "security",
            "is_correct": true,
            "consequence": {
              "title": "Decisi√≥n Correcta a Largo Plazo",
              "description": "Pierdes Q4 pero tus dispositivos NO ser√°n parte de botnets. Tu reputaci√≥n se salva cuando Mirai ataca.",
              "impact_score": 100,
              "xp_bonus": 25
            }
          },
          {
            "id": "telnet",
            "text": "Ship con Telnet ahora - optimizar despu√©s",
            "icon": "speed",
            "is_correct": false,
            "consequence": {
              "title": "Esto fue lo que hicieron todos",
              "description": "Ganas Q4. Pero tus 500K c√°maras se vuelven parte de Mirai. PR nightmare. Lawsuits. Recall costoso. $2 de ahorro ‚Üí $20M en p√©rdidas.",
              "impact_score": -100
            }
          }
        ]
      }
    },
    {
      "screen_id": 5,
      "type": "flip_card_full",
      "title": "TCP/IP: Application Layer",
      "content": {
        "card": {
          "front": {
            "icon": "web",
            "term": "APPLICATION LAYER",
            "subtitle": "Capa 4 - Top",
            "color": "#1976D2"
          },
          "back": {
            "definition": "Protocolos de usuario final: HTTP, HTTPS, DNS, SMTP, FTP, SSH, Telnet. Interact√∫a directamente con aplicaciones.",
            "protocols": [
              "HTTP (80): Web sin encryption",
              "HTTPS (443): Web con TLS",
              "DNS (53): Domain name resolution",
              "SMTP (25): Email sending",
              "SSH (22): Secure remote shell",
              "Telnet (23): INSECURE remote shell"
            ],
            "mirai_relevance": "Mirai explot√≥ Telnet (Application Layer). Telnet transmite TODO en cleartext: username, password, commands.",
            "color": "#1565C0"
          }
        }
      }
    },
    {
      "screen_id": 6,
      "type": "flip_card_full",
      "title": "TCP/IP: Transport Layer",
      "content": {
        "card": {
          "front": {
            "icon": "sync_alt",
            "term": "TRANSPORT LAYER",
            "subtitle": "Capa 3",
            "color": "#388E3C"
          },
          "back": {
            "definition": "TCP (reliable) y UDP (fast). Maneja ports (0-65535), flow control, segmentaci√≥n de data.",
            "tcp_vs_udp": {
              "tcp": "Reliable, conexi√≥n, handshake, retransmission. HTTP, SSH, email.",
              "udp": "Fast, connectionless, no garant√≠as. DNS, streaming, gaming."
            },
            "ports": "Well-known: 0-1023. Registered: 1024-49151. Dynamic: 49152-65535.",
            "mirai_relevance": "Mirai us√≥ UDP para DDoS (UDP flood). UDP amplification: request 60 bytes ‚Üí response 3000 bytes.",
            "color": "#2E7D32"
          }
        }
      }
    },
    {
      "screen_id": 7,
      "type": "flip_card_full",
      "title": "TCP/IP: Internet Layer",
      "content": {
        "card": {
          "front": {
            "icon": "public",
            "term": "INTERNET LAYER",
            "subtitle": "Capa 2",
            "color": "#F57C00"
          },
          "back": {
            "definition": "IP addressing y routing. IPv4 (32-bit: 192.168.1.1) o IPv6 (128-bit). ICMP para diagnostics.",
            "key_concepts": [
              "IP packet: source IP, dest IP, TTL, protocol",
              "Routing: determinar path entre networks",
              "ICMP: ping, traceroute",
              "IPsec: encryption a nivel IP"
            ],
            "vulnerabilities": "IP spoofing (fake source IP), ICMP floods, routing attacks",
            "mirai_relevance": "Mirai spoofed IPs en UDP flood. V√≠ctima recibe tr√°fico de 'everywhere'.",
            "color": "#EF6C00"
          }
        }
      }
    },
    {
      "screen_id": 8,
      "type": "flip_card_full",
      "title": "TCP/IP: Network Access Layer",
      "content": {
        "card": {
          "front": {
            "icon": "settings_ethernet",
            "term": "NETWORK ACCESS",
            "subtitle": "Capa 1 - Bottom",
            "color": "#7B1FA2"
          },
          "back": {
            "definition": "Hardware: Ethernet, WiFi, fiber. MAC addressing (48-bit). Physical transmission de bits.",
            "technologies": [
              "Ethernet: Cable, switches, MAC addresses",
              "WiFi (802.11): Wireless, WPA2/WPA3 encryption",
              "Fiber: Long distance, high speed",
              "ARP: IP ‚Üí MAC resolution"
            ],
            "vulnerabilities": "MAC spoofing, ARP poisoning, WiFi eavesdropping, rogue access points",
            "color": "#6A1B9A"
          }
        }
      }
    },
    {
      "screen_id": 9,
      "type": "drag_drop_match",
      "title": "Map: Protocolo ‚Üí Capa TCP/IP",
      "content": {
        "instruction": "Arrastra cada protocolo a su capa TCP/IP",
        "scenarios": [
          {"id": 1, "text": "HTTP / HTTPS", "correct_target": "application"},
          {"id": 2, "text": "TCP / UDP", "correct_target": "transport"},
          {"id": 3, "text": "IP / ICMP", "correct_target": "internet"},
          {"id": 4, "text": "Ethernet / WiFi", "correct_target": "network_access"},
          {"id": 5, "text": "DNS", "correct_target": "application"},
          {"id": 6, "text": "ARP", "correct_target": "network_access"}
        ],
        "targets": [
          {"id": "application", "label": "Application (L4)", "color": "#1976D2", "icon": "web"},
          {"id": "transport", "label": "Transport (L3)", "color": "#388E3C", "icon": "sync_alt"},
          {"id": "internet", "label": "Internet (L2)", "color": "#F57C00", "icon": "public"},
          {"id": "network_access", "label": "Network Access (L1)", "color": "#7B1FA2", "icon": "settings_ethernet"}
        ],
        "xp_per_correct": 6,
        "success_message": "¬°Dominas el stack TCP/IP!"
      }
    },
    {
      "screen_id": 10,
      "type": "flip_card_full",
      "title": "Puerto 23: Telnet (Mirai Vector)",
      "content": {
        "card": {
          "front": {
            "icon": "dangerous",
            "term": "TELNET",
            "subtitle": "Puerto 23 - TCP",
            "color": "#D32F2F"
          },
          "back": {
            "definition": "Remote shell access protocol de 1969. TODO en cleartext: username, password, commands. NUNCA usar en 2024.",
            "why_dangerous": [
              "Zero encryption - todo visible en wireshark",
              "Credentials en plaintext",
              "No authentication fuerte",
              "Legacy de pre-internet security"
            ],
            "mirai_exploit": "Mirai scaneaba puerto 23 abierto. Probaba 60+ combos: admin/admin, root/root, root/12345, admin/password.",
            "alternative": "SSH (puerto 22): encrypted, key-based auth, modern. SSH existe desde 1995, no hay excusa para usar Telnet.",
            "color": "#B71C1C"
          }
        }
      }
    },
    {
      "screen_id": 11,
      "type": "flip_card_full",
      "title": "Puerto 53: DNS",
      "content": {
        "card": {
          "front": {
            "icon": "dns",
            "term": "DNS",
            "subtitle": "Puerto 53 - UDP/TCP",
            "color": "#2196F3"
          },
          "back": {
            "definition": "Domain Name System. Traduce nombres (google.com) a IPs (142.250.80.46). Critical infrastructure de internet.",
            "how_it_works": "Query: client ‚Üí DNS server. Response: server ‚Üí client con IP. UDP para queries (fast), TCP para zone transfers.",
            "vulnerabilities": [
              "Cache poisoning: inyectar entradas fake",
              "Amplification DDoS: 60 bytes query ‚Üí 3000 bytes response",
              "DNS tunneling: C2 traffic oculto en queries",
              "DDoS target: sin DNS, internet colapsa"
            ],
            "mirai_attack": "Dyn DNS recibi√≥ 1.2 Tbps de UDP floods. DNS servers overwhelmed. Twitter, Netflix, GitHub offline.",
            "defense": "DNSSEC, rate limiting, anycast, redundant DNS",
            "color": "#1976D2"
          }
        }
      }
    },
    {
      "screen_id": 12,
      "type": "flip_card_full",
      "title": "Puerto 445: SMB (EternalBlue)",
      "content": {
        "card": {
          "front": {
            "icon": "folder_shared",
            "term": "SMB",
            "subtitle": "Puerto 445 - TCP",
            "color": "#FF9800"
          },
          "back": {
            "definition": "Server Message Block. File sharing en Windows. Network drives, printers, IPC (inter-process communication).",
            "use_cases": "\\\\server\\share para acceder archivos. Windows domain authentication. Printer sharing.",
            "vulnerabilities": [
              "EternalBlue (CVE-2017-0144): RCE wormable",
              "SMBv1: legacy, m√∫ltiples vulns, disable ASAP",
              "Credential theft v√≠a NTLM relay",
              "Lateral movement favorito de atacantes"
            ],
            "wannacry": "WannaCry us√≥ EternalBlue en puerto 445 para propagarse. Worm = autoreplication sin user interaction.",
            "defense": "Patch MS17-010, disable SMBv1, segment network, block 445 en firewall perimeter",
            "color": "#F57C00"
          }
        }
      }
    },
    {
      "screen_id": 13,
      "type": "flip_card_full",
      "title": "Puerto 3389: RDP",
      "content": {
        "card": {
          "front": {
            "icon": "desktop_windows",
            "term": "RDP",
            "subtitle": "Puerto 3389 - TCP",
            "color": "#9C27B0"
          },
          "back": {
            "definition": "Remote Desktop Protocol. Acceso remoto completo a Windows desktop. GUI full, como estar f√≠sicamente en la m√°quina.",
            "use_cases": "IT admin remoto. Work from home. Server administration.",
            "vulnerabilities": [
              "BlueKeep (CVE-2019-0708): wormable RCE",
              "Brute force: bots atacan 3389 24/7",
              "MITM si TLS no configured",
              "Credential stuffing con leaked passwords"
            ],
            "ransomware_vector": "3M+ RDP servers expuestos a internet. Ransomware gangs brute force 3389, deploy ransomware.",
            "defense": "NLA (Network Level Auth), MFA, strong passwords, VPN-only access, rate limiting",
            "color": "#7B1FA2"
          }
        }
      }
    },
    {
      "screen_id": 14,
      "type": "swipe_cards",
      "title": "TCP o UDP?",
      "content": {
        "instruction": "¬øEste protocolo usa TCP o UDP?",
        "cards": [
          {
            "id": 1,
            "scenario": "HTTP - Web browsing (necesita reliability)",
            "correct_answer": "left",
            "labels": {"left": "TCP", "right": "UDP"}
          },
          {
            "id": 2,
            "scenario": "DNS queries (speed cr√≠tico, peque√±as)",
            "correct_answer": "right",
            "labels": {"left": "TCP", "right": "UDP"}
          },
          {
            "id": 3,
            "scenario": "SSH - Remote shell (reliability cr√≠tica)",
            "correct_answer": "left",
            "labels": {"left": "TCP", "right": "UDP"}
          },
          {
            "id": 4,
            "scenario": "Video streaming (speed > perfection)",
            "correct_answer": "right",
            "labels": {"left": "TCP", "right": "UDP"}
          },
          {
            "id": 5,
            "scenario": "Email (SMTP) - no puede perder messages",
            "correct_answer": "left",
            "labels": {"left": "TCP", "right": "UDP"}
          },
          {
            "id": 6,
            "scenario": "Gaming multiplayer (latency cr√≠tica)",
            "correct_answer": "right",
            "labels": {"left": "TCP", "right": "UDP"}
          }
        ],
        "xp_per_correct": 8,
        "success_message": "¬°Entiendes cu√°ndo usar TCP vs UDP!"
      }
    },
    {
      "screen_id": 15,
      "type": "flip_card_full",
      "title": "TCP 3-Way Handshake",
      "content": {
        "card": {
          "front": {
            "icon": "handshake",
            "term": "3-WAY HANDSHAKE",
            "subtitle": "TCP Connection Setup",
            "color": "#388E3C"
          },
          "back": {
            "definition": "Establecimiento de conexi√≥n TCP. Sincroniza sequence numbers y confirma que ambos lados est√°n listos.",
            "steps": [
              "1. Client ‚Üí Server: SYN (synchronize)",
              "2. Server ‚Üí Client: SYN-ACK (acknowledge)",
              "3. Client ‚Üí Server: ACK (acknowledge)",
              "Connection established ‚úì"
            ],
            "attack": "SYN Flood: enviar miles de SYNs, nunca enviar ACK final. Server mantiene half-open connections, exhaust resources.",
            "defense": "SYN cookies: no mantener state hasta ACK final. Rate limiting. Firewall con SYN flood protection.",
            "color": "#2E7D32"
          }
        }
      }
    },
    {
      "screen_id": 16,
      "type": "flip_card_full",
      "title": "UDP Amplification Attack",
      "content": {
        "card": {
          "front": {
            "icon": "volume_up",
            "term": "AMPLIFICATION",
            "subtitle": "UDP Reflection DDoS",
            "color": "#D32F2F"
          },
          "back": {
            "definition": "Enviar request peque√±o a server vulnerable con IP spoofed (v√≠ctima). Server responde con response GRANDE a v√≠ctima. DDoS masivo con poco bandwidth del atacante.",
            "how_it_works": [
              "1. Atacante spoofs IP origen = v√≠ctima",
              "2. Env√≠a peque√±o UDP request a server",
              "3. Server responde GRANDE a v√≠ctima",
              "4. Amplification: 10x-100x del request"
            ],
            "protocols": "DNS (50x), NTP (234x), SSDP (30x), Memcached (51,000x!)",
            "mirai_use": "Mirai us√≥ DNS y NTP amplification. 1.2 Tbps contra Dyn.",
            "defense": "BCP38 (no permitir IP spoofing), rate limiting, disable open resolvers",
            "color": "#B71C1C"
          }
        }
      }
    },
    {
      "screen_id": 17,
      "type": "log_hunter",
      "title": "üîç Detect Port Scan",
      "content": {
        "instruction": "Revisa estos firewall logs. Identifica el port scan de Mirai.",
        "time_limit": 90,
        "logs": [
          {"id": 1, "timestamp": "10:23:01", "text": "SRC: 192.168.1.100 ‚Üí DST: 10.0.0.50 PORT: 80 ALLOW", "suspicious": false},
          {"id": 2, "timestamp": "10:23:02", "text": "SRC: 185.234.x.x ‚Üí DST: 10.0.0.50 PORT: 23 DENY", "suspicious": true},
          {"id": 3, "timestamp": "10:23:02", "text": "SRC: 185.234.x.x ‚Üí DST: 10.0.0.51 PORT: 23 DENY", "suspicious": true},
          {"id": 4, "timestamp": "10:23:03", "text": "SRC: 185.234.x.x ‚Üí DST: 10.0.0.52 PORT: 23 DENY", "suspicious": true},
          {"id": 5, "timestamp": "10:23:04", "text": "SRC: 192.168.1.200 ‚Üí DST: 8.8.8.8 PORT: 53 ALLOW", "suspicious": false},
          {"id": 6, "timestamp": "10:23:05", "text": "SRC: 185.234.x.x ‚Üí DST: 10.0.0.53 PORT: 23 DENY", "suspicious": true},
          {"id": 7, "timestamp": "10:23:06", "text": "SRC: 192.168.1.100 ‚Üí DST: 10.0.0.50 PORT: 443 ALLOW", "suspicious": false}
        ],
        "hints": [
          "Mismo source IP escaneando m√∫ltiples hosts",
          "Puerto 23 (Telnet) es target",
          "Sequential scanning de IPs",
          "Mirai pattern: scan masivo buscando Telnet"
        ],
        "success_threshold": 4,
        "xp_reward": 25
      }
    },
    {
      "screen_id": 18,
      "type": "timed_quiz",
      "title": "‚ö° Final Challenge",
      "content": {
        "timer_seconds": 25,
        "question": "¬øPor qu√© Mirai tuvo tanto √©xito infectando dispositivos IoT?",
        "options": [
          {"id": "a", "text": "Us√≥ zero-day exploit imposible de prevenir", "is_correct": false},
          {"id": "b", "text": "Telnet (puerto 23) en cleartext + credenciales default nunca cambiadas", "is_correct": true},
          {"id": "c", "text": "Los dispositivos IoT no tienen antivirus", "is_correct": false},
          {"id": "d", "text": "Us√≥ DNS tunneling para ocultar C2", "is_correct": false}
        ],
        "explanation": "Mirai NO us√≥ zero-day. Explot√≥ Telnet con credenciales DEFAULT (admin/admin). Era 100% prevenible: cambiar passwords o disable Telnet. Fabricantes shippean IoT con seguridad CERO.",
        "xp_reward": 20,
        "bonus_xp_fast": 10
      }
    },
    {
      "screen_id": 19,
      "type": "achievement_unlock",
      "title": "Logro Desbloqueado",
      "content": {
        "achievement": {
          "icon": "router",
          "name": "Network Protocol Master",
          "description": "Dominas TCP/IP stack, puertos cr√≠ticos y ataques de red",
          "rarity": "rare",
          "color": "#FF5722"
        }
      }
    },
    {
      "screen_id": 20,
      "type": "lesson_complete",
      "title": "Lecci√≥n Completada",
      "content": {
        "xp_earned": 60,
        "key_takeaways": [
          "TCP/IP: 4 capas - Application, Transport, Internet, Network Access",
          "Telnet (23) = cleartext NUNCA usar. SSH (22) = encrypted",
          "DNS (53) cr√≠tico - sin DNS, sin internet",
          "UDP amplification: request peque√±o ‚Üí response GIGANTE",
          "Mirai: 600K IoT + credenciales default = 1.2 Tbps DDoS"
        ],
        "next_lesson": {
          "id": "c2_l2",
          "title": "Firewalls y Segmentaci√≥n",
          "preview": "C√≥mo defender redes con firewalls, VLANs y Zero Trust"
        }
      }
    }
  ]
}