{
  "id": "c2_l7",
  "title": "Evaluaci√≥n Final Curso 2",
  "description": "Dise√±a Network Security Architecture",
  "type": "interactive",
  "duration_minutes": 25,
  "xp_reward": 80,
  "order_index": 7,
  "course_id": 2,
  "total_screens": 18,
  "theme": {
    "primary_color": "#FFC107",
    "secondary_color": "#2196F3",
    "accent_color": "#4CAF50",
    "gradient": ["#0f2027", "#203a43", "#2c5364"]
  },
  "screens": [
    {
      "screen_id": 1,
      "type": "story_intro",
      "title": "Evaluaci√≥n Final: E-Commerce Security",
      "content": {
        "headline": "CAPSTONE PROJECT",
        "subheadline": "Dise√±a arquitectura de red segura completa",
        "stats": [
          { "value": "100", "label": "Empleados" },
          { "value": "10K", "label": "Transactions/d√≠a" },
          { "value": "$200K", "label": "Budget anual" }
        ],
        "cta_text": "Comenzar Dise√±o"
      }
    },
    {
      "screen_id": 2,
      "type": "story_slide",
      "title": "El Escenario",
      "content": {
        "icon": "business",
        "icon_color": "#FFC107",
        "headline": "Startup E-Commerce",
        "body": "100 empleados (50 office, 50 remote). E-commerce site: 10K transactions/d√≠a, procesa credit cards (PCI DSS mandatory). Customer PII. Dev team necesita prod access. Budget: $200K/a√±o.",
        "requirements": [
          "Compliance: PCI DSS Level 2",
          "Availability: 99.9% uptime",
          "Remote access: Secure para 50 employees",
          "Dev access: Segregado pero con prod visibility"
        ]
      }
    },
    {
      "screen_id": 3,
      "type": "drag_drop_builder",
      "title": "üèóÔ∏è Design Network Topology",
      "content": {
        "instruction": "Arrastra componentes para crear arquitectura completa",
        "available_components": [
          { "id": "internet", "name": "Internet", "layer": "external" },
          { "id": "ngfw", "name": "NGFW (Palo Alto)", "layer": "perimeter" },
          { "id": "waf", "name": "WAF (Cloudflare)", "layer": "perimeter" },
          { "id": "dmz_web", "name": "Web Servers (DMZ)", "layer": "dmz" },
          { "id": "dmz_api", "name": "API Gateway (DMZ)", "layer": "dmz" },
          { "id": "internal_fw", "name": "Internal Firewall", "layer": "internal_edge" },
          { "id": "vlan_db", "name": "DB VLAN (PCI)", "layer": "internal" },
          { "id": "vlan_users", "name": "Employee VLAN", "layer": "internal" },
          { "id": "vlan_dev", "name": "Dev/Test VLAN", "layer": "internal" },
          { "id": "vlan_guest", "name": "Guest WiFi VLAN", "layer": "internal" },
          { "id": "vpn", "name": "VPN Concentrator", "layer": "remote_access" },
          { "id": "siem", "name": "SIEM (Splunk)", "layer": "monitoring" }
        ],
        "success_criteria": "Internet ‚Üí WAF ‚Üí NGFW ‚Üí DMZ ‚Üí Internal FW ‚Üí Segmented VLANs + VPN + SIEM monitoring",
        "xp_reward": 30
      }
    },
    {
      "screen_id": 4,
      "type": "flip_card_full",
      "title": "Perimeter Defense",
      "content": {
        "card": {
          "front": {
            "icon": "shield",
            "term": "PERIMETER",
            "subtitle": "First line of defense",
            "color": "#F44336"
          },
          "back": {
            "components": [
              "WAF (Cloudflare): $2K/year. Mandatory para PCI DSS. Protege contra SQLi, XSS, DDoS.",
              "NGFW (Palo Alto PA-220): $50K/year. IPS, malware detection, SSL inspection.",
              "DDoS protection: Cloudflare included. Rate limiting.",
              "IDS: Suricata en firewall para additional detection."
            ],
            "budget": "$52K/year (26% of budget)",
            "pci_requirement": "Firewall + WAF = PCI DSS requirement 1.2, 6.6",
            "color": "#D32F2F"
          }
        }
      }
    },
    {
      "screen_id": 5,
      "type": "flip_card_full",
      "title": "DMZ + Segmentation",
      "content": {
        "card": {
          "front": {
            "icon": "lan",
            "term": "SEGMENTATION",
            "subtitle": "Separate zones",
            "color": "#2196F3"
          },
          "back": {
            "architecture": [
              "DMZ: Web servers + API gateway (public-facing)",
              "VLAN 10: Database servers - PCI cardholder data environment (CDE)",
              "VLAN 20: Employee workstations",
              "VLAN 30: Dev/test environment (NO prod data)",
              "VLAN 40: Guest WiFi (isolated)"
            ],
            "firewall_rules": "Default deny. Web ‚Üí API allowed. API ‚Üí DB allowed. DB NO initiate outbound. Guest WiFi ‚Üí Internet only.",
            "pci_benefit": "Segmentaci√≥n reduce PCI scope. Solo VLAN 10 (DB) en scope = menos audit cost.",
            "color": "#1976D2"
          }
        }
      }
    },
    {
      "screen_id": 6,
      "type": "drag_drop_match",
      "title": "Firewall Rules: Permitir o Denegar?",
      "content": {
        "instruction": "Arrastra cada rule a ALLOW o DENY",
        "scenarios": [
          { "id": 1, "text": "Internet ‚Üí Web Server:443 (HTTPS)", "correct_target": "allow" },
          { "id": 2, "text": "Web Server ‚Üí Database:3306 (MySQL)", "correct_target": "deny" },
          { "id": 3, "text": "API Gateway ‚Üí Database:3306", "correct_target": "allow" },
          { "id": 4, "text": "Employee VLAN ‚Üí Database VLAN:3306", "correct_target": "deny" },
          { "id": 5, "text": "Database ‚Üí Internet:ANY", "correct_target": "deny" },
          { "id": 6, "text": "Guest WiFi ‚Üí Internal VLANs", "correct_target": "deny" }
        ],
        "targets": [
          { "id": "allow", "label": "ALLOW", "color": "#4CAF50" },
          { "id": "deny", "label": "DENY", "color": "#F44336" }
        ],
        "xp_per_correct": 8
      }
    },
    {
      "screen_id": 7,
      "type": "crisis_decision",
      "title": "üö® Remote Access Solution",
      "content": {
        "scenario": "50 remote employees necesitan acceso. Dev team (10) necesita prod access. ¬øQu√© deployment?",
        "timer_seconds": 25,
        "options": [
          {
            "id": "vpn_flat",
            "text": "VPN tradicional con full network access para todos",
            "icon": "vpn_lock",
            "is_correct": false,
            "consequence": {
              "title": "Over-privileged",
              "description": "Full network access viola least privilege. Remote compromise = access a todo. PCI DSS violation.",
              "impact_score": -60
            }
          },
          {
            "id": "ztna",
            "text": "ZTNA (Zero Trust) con access granular por role",
            "icon": "security",
            "is_correct": true,
            "consequence": {
              "title": "Best Practice",
              "description": "ZTNA: Employees acceden SOLO sus apps. Dev team accede prod con MFA + approval workflow. Least privilege.",
              "impact_score": 100,
              "xp_bonus": 25
            }
          }
        ]
      }
    },
    {
      "screen_id": 8,
      "type": "flip_card_full",
      "title": "Remote Access Design",
      "content": {
        "card": {
          "front": {
            "icon": "vpn_key",
            "term": "REMOTE ACCESS",
            "subtitle": "Secure + Least Privilege",
            "color": "#9C27B0"
          },
          "back": {
            "solution": "Cloudflare Access (ZTNA): $7/user/month = $4.2K/year for 50 users.",
            "architecture": [
              "Employees: Access solo sus apps (email, Slack, internal tools)",
              "Dev team: Prod access con MFA + approval workflow + audit logging",
              "NO full network access. Identity-based policies.",
              "Device posture check: AV, patch level verified pre-access"
            ],
            "vs_vpn": "VPN = full network. ZTNA = granular app access. ZTNA = Zero Trust compliant.",
            "budget": "$4.2K/year (2% of budget)",
            "color": "#7B1FA2"
          }
        }
      }
    },
    {
      "screen_id": 9,
      "type": "flip_card_full",
      "title": "Monitoring Strategy",
      "content": {
        "card": {
          "front": {
            "icon": "visibility",
            "term": "MONITORING",
            "subtitle": "Detect threats early",
            "color": "#00BCD4"
          },
          "back": {
            "components": [
              "SIEM (Splunk Cloud): $30K/year. Aggregate logs from all sources.",
              "NetFlow: ntopng ($2K/year). Traffic visibility.",
              "IDS/IPS: Suricata (free, on firewall). Threat detection.",
              "PCAP: Limited retention (7 days) for DMZ traffic. $5K storage."
            ],
            "alerts": "Failed logins, lateral movement, data exfiltration, C2 communication, policy violations",
            "retention": "Logs: 90 days (PCI requirement 10.7). PCAP: 7 days.",
            "budget": "$37K/year (18.5% of budget)",
            "color": "#00ACC1"
          }
        }
      }
    },
    {
      "screen_id": 10,
      "type": "slider_balance",
      "title": "Estrategia de Presupuesto",
      "content": {
        "scenario": "Tienes $200K. ¬øD√≥nde inviertes la mayor parte?",
        "left_option": {
          "label": "Per√≠metro (Firewalls)",
          "icon": "shield",
          "consequences": [
            "‚úÖ Fuerte barrera de entrada",
            "‚ùå Una vez dentro, v√≠a libre",
            "‚ùå Enfoque obsoleto (a√±os 2000)"
          ]
        },
        "right_option": {
          "label": "Detecci√≥n Interna (EDR/SIEM)",
          "icon": "radar",
          "consequences": [
            "‚úÖ Detecta amenazas que cruzan el firewall",
            "‚úÖ Visibilidad de movimiento lateral",
            "‚úÖ Enfoque moderno (Assume Breach)"
          ]
        },
        "explanation": "Invierte en detecci√≥n y respuesta (EDR/SIEM). Los firewalls son necesarios, pero insuficientes. Asume que van a entrar; aseg√∫rate de verlos cuando lo hagan."
      }
    },
    {
      "screen_id": 11,
      "type": "timed_quiz",
      "title": "‚ö° PCI DSS Requirement",
      "content": {
        "timer_seconds": 20,
        "question": "Para PCI DSS compliance, ¬øqu√© es MANDATORY?",
        "options": [
          { "id": "a", "text": "Firewall entre internet y CDE", "is_correct": false },
          { "id": "b", "text": "Firewall + WAF + Network segmentation + Logging", "is_correct": true },
          { "id": "c", "text": "Solo antivirus en servers", "is_correct": false }
        ],
        "explanation": "PCI DSS Requirements: 1.2 (Firewall), 6.6 (WAF), 1.3 (Segmentation), 10.x (Logging + monitoring). Comprehensive controls necesarios.",
        "xp_reward": 20
      }
    },
    {
      "screen_id": 12,
      "type": "timed_quiz",
      "title": "‚ö° DDoS Response",
      "content": {
        "timer_seconds": 20,
        "question": "Detectas DDoS de 50Gbps contra tu e-commerce. ¬øPrimera acci√≥n?",
        "options": [
          { "id": "a", "text": "Aumentar bandwidth del ISP", "is_correct": false },
          { "id": "b", "text": "Activar Cloudflare DDoS protection (ya deployado)", "is_correct": true },
          { "id": "c", "text": "Apagar el sitio", "is_correct": false }
        ],
        "explanation": "Cloudflare DDoS protection absorbe el ataque. Bandwidth del ISP no ayuda (50Gbps >> tu link). Never apagar - eso es lo que quiere el atacante.",
        "xp_reward": 20
      }
    },
    {
      "screen_id": 13,
      "type": "timed_quiz",
      "title": "‚ö° Incident: Lateral Movement",
      "content": {
        "timer_seconds": 25,
        "question": "SIEM alerta: Workstation ‚Üí DC:445 (SMB). ¬øQu√© significa?",
        "options": [
          { "id": "a", "text": "Normal file sharing", "is_correct": false },
          { "id": "b", "text": "Possible lateral movement / compromised workstation", "is_correct": true },
          { "id": "c", "text": "Printing activity", "is_correct": false }
        ],
        "explanation": "Workstation ‚Üí DC directo = AN√ìMALO. Deber√≠a ir v√≠a infraestructura. SMB a DC = lateral movement attempt. Investigate immediately.",
        "xp_reward": 20
      }
    },
    {
      "screen_id": 14,
      "type": "summary_stats",
      "title": "Architecture Summary",
      "content": {
        "stats": [
          { "icon": "shield", "value": "$52K", "label": "Perimeter (NGFW+WAF)" },
          { "icon": "visibility", "value": "$37K", "label": "Monitoring (SIEM)" },
          { "icon": "vpn_key", "value": "$4K", "label": "Remote Access (ZTNA)" },
          { "icon": "computer", "value": "$40K", "label": "Endpoints (EDR)" }
        ],
        "total_budget": "$200K allocated",
        "key_components": [
          "Perimeter: NGFW + WAF + DDoS protection",
          "Segmentation: DMZ + 4 VLANs (DB, Users, Dev, Guest)",
          "Remote Access: ZTNA con least privilege",
          "Monitoring: SIEM + NetFlow + IDS + PCAP",
          "Compliance: PCI DSS Level 2 achievable"
        ],
        "pci_scope": "Reduced to DB VLAN only = easier audit, lower cost"
      }
    },
    {
      "screen_id": 15,
      "type": "flip_card_full",
      "title": "Incident Response Plan",
      "content": {
        "card": {
          "front": {
            "icon": "emergency",
            "term": "IR PLAN",
            "subtitle": "Be prepared",
            "color": "#FF5722"
          },
          "back": {
            "phases": [
              "1. Preparation: IR team, tools, retainer with IR firm",
              "2. Detection: SIEM alerts, user reports",
              "3. Containment: Isolate affected systems, block IOCs",
              "4. Eradication: Remove malware, patch vulnerabilities",
              "5. Recovery: Restore from backups, verify integrity",
              "6. Lessons Learned: Post-mortem, update defenses"
            ],
            "retainer": "$20K/year IR firm retainer. Access to experts 24/7.",
            "insurance": "$15K/year cyber insurance. Covers breach costs.",
            "color": "#E64A19"
          }
        }
      }
    },
    {
      "screen_id": 16,
      "type": "flip_card_full",
      "title": "Continuous Improvement",
      "content": {
        "card": {
          "front": {
            "icon": "trending_up",
            "term": "CONTINUOUS",
            "subtitle": "Security is a journey",
            "color": "#4CAF50"
          },
          "back": {
            "ongoing": [
              "Quarterly: Firewall rule review, remove obsoletes",
              "Monthly: Vulnerability scans (Nessus)",
              "Weekly: Patch management windows",
              "Daily: SIEM alert review, threat intel updates",
              "Annual: Penetration testing, PCI audit, tabletop exercises"
            ],
            "metrics": "MTTD (Mean Time To Detect), MTTR (Mean Time To Respond), Patch SLA compliance",
            "improvement": "Learn from incidents. Update playbooks. Training based on failures.",
            "color": "#388E3C"
          }
        }
      }
    },
    {
      "screen_id": 17,
      "type": "achievement_unlock",
      "title": "üèÜ CURSO 2 COMPLETADO",
      "content": {
        "achievement": {
          "icon": "military_tech",
          "name": "Network Security Architect",
          "description": "Dise√±aste arquitectura de red completa: perimeter, segmentation, monitoring, remote access",
          "rarity": "epic",
          "color": "#FFD700"
        },
        "certification": {
          "title": "Network Security Fundamentals",
          "topics_mastered": [
            "TCP/IP protocols y puertos",
            "Firewalls: Stateless, Stateful, NGFW, WAF",
            "IDS/IPS y detection methods",
            "VPN: IPsec, SSL, ZTNA",
            "Network segmentation: VLANs, DMZ, micro-seg",
            "Monitoring: NetFlow, SIEM, PCAP",
            "Zero Trust architecture",
            "PCI DSS compliance"
          ]
        }
      }
    },
    {
      "screen_id": 18,
      "type": "lesson_complete",
      "title": "üéì CURSO 2 COMPLETADO",
      "content": {
        "xp_earned": 80,
        "total_course_xp": 415,
        "key_takeaways": [
          "Dise√±aste e-commerce network security completa",
          "Budget allocation: 26% perimeter, 18% monitoring, 20% endpoints",
          "PCI DSS: Segmentation reduce scope y audit cost",
          "ZTNA > VPN tradicional para least privilege",
          "Defense in depth: M√∫ltiples capas de protecci√≥n"
        ],
        "next_course": {
          "id": "c3",
          "title": "Curso 3: Criptograf√≠a y PKI",
          "preview": "Encryption, hashing, digital signatures, certificates"
        },
        "congratulations": "¬°Excelente! Dominas fundamentos de network security. Listo para criptograf√≠a."
      }
    }
  ]
}